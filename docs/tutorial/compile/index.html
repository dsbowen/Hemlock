<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Compile - Hemlock</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Compile";
    var mkdocs_page_input_path = "tutorial/compile.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Hemlock</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../manifesto/">Why hemlock?</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../contact/">Contact</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../checklist/">Checklist</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorial</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../first_project/">Your first project</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../run_local/">Running hemlock locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../qpolymorphs/">Question polymorphs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data/">Data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../validate/">Validate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../submit/">Submit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extensions/">Extensions</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Compile</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#basic-syntax">Basic syntax</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#an-aside-on-tools">An aside on tools</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-compilation">Custom compilation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#the-demographics-page-a-recap">The demographics page: a recap</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#the-compile-function">The compile function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#our-compile-function-at-work">Our compile function at work</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#compilation-in-our-app">Compilation in our app</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../navigate/">Navigate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../page_logic/">Page logic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../comp_check/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../random_ass/">Random assignment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../proposer_branch/">Proposer branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../responder_branch/">Responder branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debug/">Debugging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deploy/">Deployment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extra/">Bells and whistles</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/win/">Windows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/wsl/">Windows Subsystem for Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/mac/">Mac</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/linux/">Linux</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Application</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../app/">Setting and initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../debug/">Debugging</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Functions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/compile/">Compile</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/debug/">Debug</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/submit/">Submit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/validate/">Validate</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Models</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/bases/">Bases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/branch/">Branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/embedded/">Embedded data and timers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/functions/">Function models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/page/">Page</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/participant/">Participant</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/question/">Question</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/worker/">Worker</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Question polymorphs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/bases/">Bases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/blank/">Blank</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/check/">Check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/choice/">Choice</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/dashboard/">Dashboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/download/">Download</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/file/">File upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/input/">Input</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/label/">Label</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/range/">Range</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/select/">Select</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/textarea/">Textarea</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tools</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/comprehension/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/lang/">Language</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/mturk/">MTurk</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/navbar/">Navbar</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/random/">Randomization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/statics/">Statics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/titrate/">Titrate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/utils/">Utilities</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../acknowledgements/">Acknowledgements</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Hemlock</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorial &raquo;</li>
        
      
    
    <li>Compile</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/dsbowen/hemlock/edit/master/docs_md/tutorial/compile.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="compile">Compile</h1>
<p>In the previous part of the tutorial, you learned how to install and use extensions and third-party packages.</p>
<p>In this part of the tutorial, you'll implement a confirmation page using compile functions.</p>
<p>Click here to see what your <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.5/blackboard.ipynb" target="_blank"><code>blackboard.ipynb</code></a> and <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.5/survey.py" target="_blank"><code>survey.py</code></a> files should look like at the end of this part of the tutorial.</p>
<details class="note"><summary>Why compile functions?</summary><p>Compile functions run just before a page's HTML is compiled. This allows us to make our survey responsive to participants. The most common use for compile functions is to 'pipe text' from a participant's previous responses onto a page.</p>
<p>In our case, we're going to make a confirmation page for the participant's demographic information.</p>
</details>
<h2 id="basic-syntax">Basic syntax</h2>
<p>Open your jupyter notebook and run the following:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Check</span><span class="p">,</span> <span class="n">Compile</span> <span class="k">as</span> <span class="n">C</span>

<span class="n">check</span> <span class="o">=</span> <span class="n">Check</span><span class="p">(</span>
    <span class="s1">&#39;Choose the correct answer&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;Correct&#39;</span><span class="p">,</span> <span class="s1">&#39;Incorrect&#39;</span><span class="p">,</span> <span class="s1">&#39;Also incorrect&#39;</span><span class="p">],</span>
    <span class="nb">compile</span><span class="o">=</span><span class="n">C</span><span class="o">.</span><span class="n">shuffle</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">check</span><span class="o">.</span><span class="n">compile</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>[&lt;shuffle()&gt;]
</code></pre></div>
<p>You can add compile functions to a page or question by setting its <code>compile</code> attribute or passing a <code>compile</code> argument to its constructor. Compile functions run just before a page's HTML is compiled.</p>
<p>The <code>shuffle</code> compile function shuffles a question's choices. (Or, if attached to a page, shuffles its page's questions).</p>
<p>Let's watch our compile function at work:</p>
<div class="highlight"><pre><span></span><code>check._compile()
check.choices
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>[&lt;Choice &#39;Also incorrect&#39;&gt;, &lt;Choice &#39;Correct&#39;&gt;, &lt;Choice &#39;Incorrect&#39;&gt;]
</code></pre></div>
<p>Run this a few times and notice how the order of the choices changes. This behavior is useful for comprehension checks, as we'll see later.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You don't need to run <code>_compile</code> yourself in the survey. Hemlock takes care of this automatically for you.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">More compile functions</p>
<p><code>shuffle</code> is just one of many <a href="../../functions/compile/">native hemlock compile functions</a>.</p>
</div>
<h2 id="an-aside-on-tools">An aside on tools</h2>
<p>To make our confirmation page, we're going to need two tools.</p>
<p>The first is <code>join</code>. This tool joins a list of items using a 'joiner' like 'and' or 'or'. We'll use this display the participant's race.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock.tools</span> <span class="kn">import</span> <span class="n">join</span>

<span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;White&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;White&#39;</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;White&#39;</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">,</span> <span class="s1">&#39;South Asian&#39;</span><span class="p">))</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>White
White and Black
White, Black, and South Asian
</code></pre></div>
<p>The second tool is <code>html_list</code>. This tool joins a list of items in a bullet point (unordered) or enumerated (ordered) list.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Page</span><span class="p">,</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">hemlock.tools</span> <span class="kn">import</span> <span class="n">html_list</span>

<span class="n">Page</span><span class="p">(</span>
    <span class="n">Label</span><span class="p">(</span>
        <span class="n">html_list</span><span class="p">(</span>
            <span class="s1">&#39;Item 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Item 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Item 3&#39;</span><span class="p">,</span>
            <span class="n">ordered</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">preview</span><span class="p">()</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">More tools</p>
<p><code>join</code> and <code>html_list</code> are just two of many native hemlock tools. Check out the 'Tools' heading in the navigation bar for more.</p>
</div>
<h2 id="custom-compilation">Custom compilation</h2>
<p>We're going to take the participant's responses to the demographics page and display them on a new page. We'll ask the participant to correct any errors by going back to the demographics page.</p>
<h3 id="the-demographics-page-a-recap">The demographics page: a recap</h3>
<p>First, let's remind ourselves what's in the basic demographics page:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock_demographics</span> <span class="kn">import</span> <span class="n">basic_demographics</span>

<span class="n">demographics_page</span> <span class="o">=</span> <span class="n">basic_demographics</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">[</span><span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">]</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>&lt;p&gt;What is your gender?&lt;/p&gt;
&lt;p&gt;Please specify your gender.&lt;/p&gt;
&lt;p&gt;Enter your month and year of birth.&lt;/p&gt;

        &lt;p&gt;Which race or ethnicity do you belong to?&lt;/p&gt;
        &lt;p&gt;Check as many as apply.&lt;/p&gt;

&lt;p&gt;Please specify your race or ethnicity.&lt;/p&gt;
</code></pre></div>
<p>The 0th question asks for gender, the 2nd for month and year of birth, and the 3rd for race. (The 1st and 4th questions ask participants to specify gender and race if they choose 'Other').</p>
<p>Let's enter hypothetical responses for these questions.</p>
<div class="highlight"><pre><span></span><code><span class="n">gender</span> <span class="o">=</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">gender</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;Male&#39;</span>
<span class="n">dob</span> <span class="o">=</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">dob</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;1992-10&#39;</span>
<span class="n">race</span> <span class="o">=</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">race</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;White&#39;</span><span class="p">]</span>
</code></pre></div>
<h3 id="the-compile-function">The compile function</h3>
<p>It's time to write our custom compile function.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Compile</span> <span class="k">as</span> <span class="n">C</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">confirm_demographics</span><span class="p">(</span><span class="n">confirm_label</span><span class="p">,</span> <span class="n">demographics_page</span><span class="p">):</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">response</span>
    <span class="n">dob</span> <span class="o">=</span> <span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">response</span>
    <span class="n">race</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">demographics_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">response</span><span class="p">)</span>
    <span class="n">demographics_list</span> <span class="o">=</span> <span class="n">html_list</span><span class="p">(</span>
        <span class="s1">&#39;Gender: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gender</span><span class="p">),</span>
        <span class="s1">&#39;Year and month of birth: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dob</span><span class="p">),</span>
        <span class="s1">&#39;Race: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">race</span><span class="p">),</span>
        <span class="n">ordered</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="n">confirm_label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;p&gt;Confirm the following information:&lt;/p&gt;</span>
<span class="s1">        </span><span class="si">{}</span><span class="s1"></span>
<span class="s1">        To correct this information, click &#39;&amp;lt;&amp;lt;&#39;.</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">demographics_list</span><span class="p">)</span>
</code></pre></div>
<p>First, we register a new compile function with the <code>@C.register</code> decorator. The compile function takes the confirmation label as its first argument. In general, compile functions take their parent as their first argument. We also pass in the demographics page as the compile function's second argument.</p>
<p><code>confirm_demographics</code> begins by gathering the demographics data (gender, date of birth, and race) from the demographics page. We use the <code>join</code> tool to join the participant's races.</p>
<p>Finally, we create a list of the participant's demographic information using <code>html_list</code>, and add this to the confirmation label.</p>
<details class="note"><summary>What's <code>'&amp;lt;'</code>?</summary><p>The <code>label</code> attribute contains an HTML string. In HTML, <code>'&lt;'</code> has a specific meaning, so we can't say <code>'click &lt;&lt;'</code>. The HTML encoding of <code>'&lt;'</code> is <code>'&amp;lt;'</code>, so we use that instead.</p>
<p>Tl;dr Use a Word to HTML converter.</p>
</details>
<details class="warning"><summary><code>Label</code> object vs. <code>label</code> attribute</summary><p>Note that we set the confirmation label with <code>confirm_label.label='my awesome label'</code>. <code>confirm_label</code> is a <code>Label</code> object. <code>confirm_label.label</code> is the attribute which contains the HTML. Don't confuse the <code>Label</code> object with the <code>label</code> attribute!</p>
</details>
<h3 id="our-compile-function-at-work">Our compile function at work</h3>
<p>Finally, let's see our compile function at work.</p>
<div class="highlight"><pre><span></span><code><span class="n">confirm_page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span>
    <span class="n">Label</span><span class="p">(</span>
        <span class="nb">compile</span><span class="o">=</span><span class="n">C</span><span class="o">.</span><span class="n">confirm_demographics</span><span class="p">(</span><span class="n">demographics_page</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">back</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">confirm_page</span><span class="o">.</span><span class="n">_compile</span><span class="p">()</span>
<span class="n">confirm_page</span><span class="o">.</span><span class="n">preview</span><span class="p">()</span>
</code></pre></div>
<p>Note that we add a back button by passing <code>back=True</code> to the label's constructor.</p>
<h2 id="compilation-in-our-app">Compilation in our app</h2>
<p>Now that we've seen how to add compile functions in our notebook, let's add it to our app.</p>
<p>In <code>survey.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Branch</span><span class="p">,</span> <span class="n">Compile</span> <span class="k">as</span> <span class="n">C</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Page</span><span class="p">,</span> <span class="n">route</span>
<span class="kn">from</span> <span class="nn">hemlock.tools</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">html_list</span>
<span class="kn">from</span> <span class="nn">hemlock_demographics</span> <span class="kn">import</span> <span class="n">basic_demographics</span>

<span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/survey&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">start</span><span class="p">():</span>
    <span class="n">demographics_page</span> <span class="o">=</span> <span class="n">basic_demographics</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">require</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Branch</span><span class="p">(</span>
        <span class="n">demographics_page</span><span class="p">,</span>
        <span class="n">Page</span><span class="p">(</span>
            <span class="n">Label</span><span class="p">(</span>
                <span class="nb">compile</span><span class="o">=</span><span class="n">C</span><span class="o">.</span><span class="n">confirm_demographics</span><span class="p">(</span><span class="n">demographics_page</span><span class="p">)</span>
            <span class="p">),</span>
            <span class="n">back</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">Page</span><span class="p">(</span>
            <span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Thank you for completing this survey!&#39;</span><span class="p">),</span> 
            <span class="n">terminal</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="nd">@C</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">confirm_demographics</span><span class="p">(</span><span class="n">confirm_label</span><span class="p">,</span> <span class="n">demographics_page</span><span class="p">):</span>
    <span class="c1"># COPY AND PASTE YOUR CONFIRM DEMOGRAPHICS FUNCTION HERE</span>
</code></pre></div>
<p>Run the app again to see your confirmation page.</p>
<h2 id="summary">Summary</h2>
<p>In this part of the tutorial, you implemented a confirmation page using compile functions.</p>
<p>In the next part of the tutorial, you'll learn how to set up navigation between branches.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../navigate/" class="btn btn-neutral float-right" title="Navigate">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../extensions/" class="btn btn-neutral" title="Extensions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/dsbowen/hemlock/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../extensions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../navigate/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
