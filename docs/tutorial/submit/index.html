<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Submit - Hemlock</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Submit";
    var mkdocs_page_input_path = "tutorial/submit.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Hemlock</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../manifesto/">Why hemlock?</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../contact/">Contact</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../checklist/">Checklist</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorial</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../first_project/">Your first project</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../run_local/">Running hemlock locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../qpolymorphs/">Question polymorphs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data/">Data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../validate/">Validate</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Submit</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#basic-syntax">Basic syntax</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-submission">Custom submission</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#code-explanation">Code explanation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#function-patterns">Function patterns</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#submission-in-our-app">Submission in our app</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extensions/">Extensions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../compile/">Compile</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../navigate/">Navigate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../page_logic/">Page logic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../comp_check/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../random_ass/">Random assignment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../proposer_branch/">Proposer branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../responder_branch/">Responder branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debug/">Debugging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deploy/">Deployment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extra/">Bells and whistles</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/win/">Windows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/wsl/">Windows Subsystem for Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/mac/">Mac</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/linux/">Linux</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Application</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../app/">Setting and initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../debug/">Debugging</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Functions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/compile/">Compile</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/debug/">Debug</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/submit/">Submit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/validate/">Validate</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Models</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/bases/">Bases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/branch/">Branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/embedded/">Embedded data and timers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/functions/">Function models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/page/">Page</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/participant/">Participant</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/question/">Question</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../models/worker/">Worker</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Question polymorphs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/bases/">Bases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/blank/">Blank</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/check/">Check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/choice/">Choice</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/dashboard/">Dashboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/download/">Download</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/file/">File upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/input/">Input</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/label/">Label</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/range/">Range</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/select/">Select</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../questions/textarea/">Textarea</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tools</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/comprehension/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/lang/">Language</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/mturk/">MTurk</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/navbar/">Navbar</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/random/">Randomization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/statics/">Statics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/titrate/">Titrate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/utils/">Utilities</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../acknowledgements/">Acknowledgements</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Hemlock</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorial &raquo;</li>
        
      
    
    <li>Submit</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/dsbowen/hemlock/edit/master/docs_md/tutorial/submit.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="submit">Submit</h1>
<p>In the previous part of the tutorial, you learned how to validate participant responses.</p>
<p>By the end of this part of the tutorial, you'll be able to run functions to handle form submission.</p>
<p>Click here to see what your <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.4/blackboard.ipynb" target="_blank"><code>blackboard.ipynb</code></a> and <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.4/survey.py" target="_blank"><code>survey.py</code></a> files should look like at the end of this part of the tutorial.</p>
<details class="note"><summary>Why submit functions?</summary><p>Submit functions run after a participant submits a page and their responses are validated. The most common use for submit functions is adding or transforming data based on a participant's responses. In our example, we're going to use a submit function to record a binary variable indicating whether the participant is female based on our gender question.</p>
</details>
<h2 id="basic-syntax">Basic syntax</h2>
<p>Open your jupyter notebook and run the following:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Submit</span> <span class="k">as</span> <span class="n">S</span>

<span class="n">inpt</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span>
    <span class="s1">&#39;Enter &quot;hello world&quot;&#39;</span><span class="p">,</span> 
    <span class="n">submit</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">inpt</span><span class="o">.</span><span class="n">submit</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>[&lt;match(&#39;hello world&#39;)&gt;]
</code></pre></div>
<p>You can add submit functions to a page or question by settings its <code>submit</code> attribute or passing a <code>submit</code> argument to its constructor. Submit functions run when a participant successfully submits a page.</p>
<p>The <code>match</code> submit function sets a question's data to 1 if the response matches a regex pattern, in this case <code>'hello world'</code>, and 0 if it does not.</p>
<p>Let's set the input question's response and watch our submit function work:</p>
<div class="highlight"><pre><span></span><code><span class="n">inpt</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;hello world&#39;</span>
<span class="n">inpt</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>1
</code></pre></div>
<p>Now let's set the question's response to something other than <code>'hello world'</code> and see what happens:</p>
<div class="highlight"><pre><span></span><code><span class="n">inpt</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;something other than hello world&#39;</span>
<span class="n">inpt</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>0
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You don't need to run <code>_submit</code> yourself in the survey. Hemlock takes care of this automatically for you.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">More submit functions</p>
<p><code>match</code> is just one of many <a href="../../functions/submit/">native hemlock submit functions</a>.</p>
</div>
<h2 id="custom-submission">Custom submission</h2>
<p>We're going to use a custom submit function to record the female indicator. Let's do this in our notebook first.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Embedded</span><span class="p">,</span> <span class="n">Page</span><span class="p">,</span> <span class="n">Select</span>

<span class="k">def</span> <span class="nf">record_female</span><span class="p">(</span><span class="n">gender</span><span class="p">):</span>
    <span class="n">gender</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">embedded</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Embedded</span><span class="p">(</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="n">gender</span><span class="o">.</span><span class="n">response</span><span class="o">==</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="n">data_rows</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>

<span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span>
    <span class="n">Select</span><span class="p">(</span>
        <span class="s1">&#39;&lt;p&gt;What is your gender?&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Other&#39;</span><span class="p">],</span>
        <span class="n">submit</span><span class="o">=</span><span class="n">record_female</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">select</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;Female&#39;</span>
<span class="n">select</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span>
<span class="n">page</span><span class="o">.</span><span class="n">embedded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>True
</code></pre></div>
<p>In:</p>
<div class="highlight"><pre><span></span><code><span class="n">select</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;Male&#39;</span>
<span class="n">select</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span>
<span class="n">page</span><span class="o">.</span><span class="n">embedded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>False
</code></pre></div>
<h3 id="code-explanation">Code explanation</h3>
<p>We created a custom submit function to add an embedded data element to the demographics page. The submit function takes the gender select question as its argument. In general, submit functions take their parent as their first argument.</p>
<p><code>gender.page</code> is the page to which the gender question belongs. <code>gender.page.embedded</code> is a list of embedded data elements belonging to that page. We set <code>embedded</code> to a list containing a single embedded data element. The embedded data element has a variable name <code>'Female'</code> and data which indicates whether the participant is female. As we did for the demographics questions, we pass <code>data_rows=-1</code>, meaning 'this value should appear on every row the participant contributes to the data frame'.</p>
<p>Finally, we add the submit function to the gender select question by passing <code>submit=record_female</code> to the question's constructor. This creates a 'sticky note' reminding the select question to run the submit function at the appropriate time.</p>
<h2 id="function-patterns">Function patterns</h2>
<p>In the previous part of the tutorial, we created a custom validate function by registering a new validate function with <code>@V.register</code>. We then added it to a question by passing <code>validate=V.my_function(my_argument)</code> to the question's constructor. Here, we added a submit function without registering it, simply by passing <code>submit=my_function</code> to the question's constructor. Why are validate and submit functions treated differently?</p>
<p>The answer is that they aren't. You can add both validate and submit functions using one of two 'patterns'.</p>
<p>Simple pattern:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">my_validate_function</span><span class="p">(</span><span class="n">question</span><span class="p">):</span>
    <span class="c1"># your amazing function here</span>

<span class="k">def</span> <span class="nf">my_submit_function</span><span class="p">(</span><span class="n">question</span><span class="p">):</span>
    <span class="c1"># your amazing function here</span>

<span class="n">Input</span><span class="p">(</span>
    <span class="n">validate</span><span class="o">=</span><span class="n">my_validate_function</span><span class="p">,</span>
    <span class="n">submit</span><span class="o">=</span><span class="n">my_submit_function</span>
<span class="p">)</span>
</code></pre></div>
<p>Decorator pattern:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@V</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">my_validate_function</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">my_argument</span><span class="p">):</span>
    <span class="c1"># your amazing function here</span>

<span class="nd">@S</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">my_submit_function</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">my_argument</span><span class="p">):</span>
    <span class="c1"># your amazing function here</span>

<span class="n">Input</span><span class="p">(</span>
    <span class="n">validate</span><span class="o">=</span><span class="n">V</span><span class="o">.</span><span class="n">my_validate_function</span><span class="p">(</span><span class="n">my_validate_argument</span><span class="p">),</span>
    <span class="n">submit</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">my_submit_function</span><span class="p">(</span><span class="n">my_submit_argument</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>The main advantage of the simple pattern is, well, its simplicity. The main advantage of the decorator pattern is that it allows you to pass additional arguments to validate and submit functions.</p>
<p>To see the decorator pattern in action for submit functions, run the following in a jupyter notebook cell:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@S</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">my_argument</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;My parent is&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;My argument is&#39;</span><span class="p">,</span> <span class="n">my_argument</span><span class="p">)</span>

<span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">submit</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">my_function</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">select</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span>
</code></pre></div>
<p>Out:</p>
<div class="highlight"><pre><span></span><code>My parent is &lt;Select (transient 140423771774256)&gt;
My argument is hello world
</code></pre></div>
<h2 id="submission-in-our-app">Submission in our app</h2>
<p>Now that we've seen how to add submit functions in our notebook, let's add it to our app.</p>
<p>In <code>survey.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Binary</span><span class="p">,</span> <span class="n">Branch</span><span class="p">,</span> <span class="n">Check</span><span class="p">,</span> <span class="n">Embedded</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Page</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">RangeInput</span><span class="p">,</span> <span class="n">Select</span><span class="p">,</span> 
    <span class="n">Submit</span> <span class="k">as</span> <span class="n">S</span><span class="p">,</span> <span class="n">Validate</span> <span class="k">as</span> <span class="n">V</span><span class="p">,</span> <span class="n">route</span>
<span class="p">)</span>

<span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/survey&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">start</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Branch</span><span class="p">(</span>
        <span class="n">Page</span><span class="p">(</span>
            <span class="n">Select</span><span class="p">(</span>
                <span class="s1">&#39;&lt;p&gt;What is your gender?&lt;/p&gt;&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Other&#39;</span><span class="p">],</span>
                <span class="n">var</span><span class="o">=</span><span class="s1">&#39;Gender&#39;</span><span class="p">,</span> <span class="n">data_rows</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">validate</span><span class="o">=</span><span class="n">V</span><span class="o">.</span><span class="n">require</span><span class="p">(),</span>
                <span class="n">submit</span><span class="o">=</span><span class="n">record_female</span>
            <span class="p">),</span>
            <span class="c1"># REST OF THE DEMOGRAPHICS PAGE</span>
        <span class="p">),</span>
        <span class="n">Page</span><span class="p">(</span>
            <span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Thank you for completing this survey!&#39;</span><span class="p">),</span> 
            <span class="n">terminal</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">record_female</span><span class="p">(</span><span class="n">gender</span><span class="p">):</span>
    <span class="n">gender</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">embedded</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Embedded</span><span class="p">(</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="n">gender</span><span class="o">.</span><span class="n">response</span><span class="o">==</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="n">data_rows</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>
</code></pre></div>
<p>Run the app again, fill in the demographics page, and download the data. You'll now see a variable 'Female' in the data frame.</p>
<h2 id="summary">Summary</h2>
<p>In this part of the tutorial, you learned how create and run submit functions.</p>
<p>In the next part of the tutorial, you'll learn how to create an entire demographics page in one line of code using hemlock extensions.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extensions/" class="btn btn-neutral float-right" title="Extensions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../validate/" class="btn btn-neutral" title="Validate"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/dsbowen/hemlock/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../validate/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../extensions/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
